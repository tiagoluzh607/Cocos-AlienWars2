{"version":3,"sources":["..\\..\\..\\assets/assets\\Jogador.js"],"names":["Personagem","require","cc","Class","extends","properties","_acelerando","_vidaAtual","vidaMaxima","velocidade","barraVida","ProgressBar","pontuacao","label","Label","onLoad","progress","systemEvent","on","SystemEvent","EventType","KEY_DOWN","teclaPressionada","KEY_UP","teclaSolta","canvas","find","mudarDirecao","atirar","director","getCollisionManager","enabled","adicionarPonto","pontos","string","tomarDano","dano","porcentagemVida","loadScene","event","posicaoMouse","getLocation","Vec2","x","y","direcao","sub","node","position","normalize","_direcao","angulo","Math","atan2","rotation","PI","keyCode","KEY","a","update","dt","deslocamento","mul","add"],"mappings":"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","file":"Jogador.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["let Personagem = require(\"Personagem\");\r\ncc.Class({\r\n    extends: Personagem,\r\n\r\n    properties: {\r\n        _acelerando:false,\r\n        //_direcao: cc.Vec2, vem da herança\r\n        \r\n        //tiroPrefab: cc.Prefab, vem da herança\r\n\t\t_vidaAtual: 0,\r\n\t\tvidaMaxima : 100,\r\n\t\t\r\n        velocidade: 10,\r\n\t\tbarraVida : cc.ProgressBar,\r\n\t\t\r\n\t\t//pontos\r\n\t\tpontuacao : 0,\r\n\t\tlabel : cc.Label\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\t\t\r\n\t\tthis._vidaAtual = this.vidaMaxima; //iniciandoa vida atual\r\n\t\tthis.barraVida.progress = 1; //Deixando a barra de vida cheia ao iniciar\r\n\t\t\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.teclaPressionada, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.teclaSolta, this);\r\n        \r\n        let canvas = cc.find(\"Canvas\");\r\n        canvas.on(\"mousemove\", this.mudarDirecao, this);\r\n        canvas.on(\"mousedown\", this.atirar, this);\r\n        \r\n        cc.director.getCollisionManager().enabled = true;\r\n        \r\n    },\r\n\t\r\n\tadicionarPonto: function(pontos){\r\n\t\tthis.pontuacao += pontos;\r\n\t\tthis.label.string = \"Pontos: \"+ this.pontuacao;\r\n\t},\r\n    \r\n\ttomarDano: function(dano){\r\n\t\tthis._vidaAtual -= dano;\r\n\t\tlet porcentagemVida = this._vidaAtual/this.vidaMaxima;\r\n\t\tthis.barraVida.progress = porcentagemVida;\r\n\t\t\r\n\t\tif(this._vidaAtual < 0){\r\n\t\t\tcc.director.loadScene(\"GameOver\"); //direciona para cena do gameover\r\n\t\t}\r\n\t\t\r\n\t},\r\n\t\r\n    mudarDirecao: function(event)\r\n    {\r\n        let posicaoMouse = event.getLocation();\r\n        posicaoMouse = new cc.Vec2(posicaoMouse.x, posicaoMouse.y);\r\n        \r\n        let direcao = posicaoMouse.sub(this.node.position);\r\n        direcao = direcao.normalize();\r\n        this._direcao = direcao;\r\n\t\t\r\n\t\t//rotacionar imagem\r\n\t\tlet angulo = Math.atan2(direcao.y, direcao.x); //retorna em radiano\r\n\t\tthis.node.rotation = -angulo * (180/Math.PI); // transforma de radianos em graus\r\n\t\t\r\n    },\r\n    \r\n    teclaPressionada: function(event)\r\n    { \r\n        if(event.keyCode == cc.KEY.a)\r\n        {\r\n            this._acelerando = true;\r\n        }\r\n    },\r\n\r\n    teclaSolta:function(event)\r\n    {\r\n        if(event.keyCode == cc.KEY.a)\r\n        {\r\n            this._acelerando = false;\r\n        }\r\n\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this._acelerando)\r\n            {\r\n                let deslocamento = this._direcao.mul(this.velocidade * dt)\r\n                this.node.position  = this.node.position.add(deslocamento);\r\n            }\r\n                \r\n            \r\n            \r\n    },\r\n});\r\n"]}