require=function n(r,c,s){function d(i,o){if(!c[i]){if(!r[i]){var t="function"==typeof require&&require;if(!o&&t)return t(i,!0);if(u)return u(i,!0);var e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}var a=c[i]={exports:{}};r[i][0].call(a.exports,function(o){return d(r[i][1][o]||o)},a,a.exports,n,r,c,s)}return c[i].exports}for(var u="function"==typeof require&&require,o=0;o<s.length;o++)d(s[o]);return d}({Gerador:[function(o,i,t){"use strict";cc._RF.push(i,"e904aoySKRKXZ2jy+9THSF5","Gerador"),cc.Class({extends:cc.Component,properties:{inimigoPrefab:cc.Prefab,area:60,tempo:2,espera:3},onLoad:function(){this.scheduleOnce(this.iniciarGeracao,this.espera)},iniciarGeracao:function(){this.schedule(this.gerar,this.tempo)},gerar:function(){var o=cc.instantiate(this.inimigoPrefab);o.parent=this.node.parent;var i=new cc.Vec2(Math.random()-.5,Math.random()-.5);i=(i=i.normalize()).mul(this.area),i=this.node.position.add(i),o.position=i}}),cc._RF.pop()},{}],Inimigo:[function(o,i,t){"use strict";cc._RF.push(i,"fd006qF4CxKV69aoDqTUU0M","Inimigo");var e=o("Personagem");cc.Class({extends:e,properties:{_alvo:cc.Node,velocidade:50,tempoAtaque:1},onLoad:function(){this._alvo=cc.find("hero"),this.schedule(this.atirar,this.tempoAtaque)},tomarDano:function(){this._alvo.getComponent("Jogador").adicionarPonto(10),this.node.destroy()},atirar:function(){var o=cc.instantiate(this.tiroPrefab);o.parent=this.node.parent,o.position=this.node.position,o.group=this.node.group,o.getComponent("Tiro").direcao=this._direcao},mudarDirecao:function(){this._direcao=this.calcularDirecao(this._alvo.position),this.node.rotation=this.olharPara(this._direcao)},update:function(o){this.mudarDirecao();var i=this._direcao.mul(this.velocidade*o);this.node.position=this.node.position.add(i)}}),cc._RF.pop()},{Personagem:"Personagem"}],Jogador:[function(o,i,t){"use strict";cc._RF.push(i,"708fcUTuIJLuJQFnqcFGhqJ","Jogador");var e=o("Personagem");cc.Class({extends:e,properties:{_acelerando:!1,_vidaAtual:0,vidaMaxima:100,velocidade:10,barraVida:cc.ProgressBar,pontuacao:0,label:cc.Label},onLoad:function(){this._vidaAtual=this.vidaMaxima,this.barraVida.progress=1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.teclaPressionada,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.teclaSolta,this);var o=cc.find("Canvas");o.on("mousemove",this.mudarDirecao,this),o.on("mousedown",this.atirar,this),cc.director.getCollisionManager().enabled=!0},adicionarPonto:function(o){this.pontuacao+=o,this.label.string="Pontos: "+this.pontuacao},tomarDano:function(o){this._vidaAtual-=o;var i=this._vidaAtual/this.vidaMaxima;this.barraVida.progress=i,this._vidaAtual<0&&cc.director.loadScene("GameOver")},mudarDirecao:function(o){var i=o.getLocation();i=new cc.Vec2(i.x,i.y),this._direcao=this.calcularDirecao(i),this.node.rotation=this.olharPara(this._direcao)},teclaPressionada:function(o){o.keyCode==cc.KEY.a&&(this._acelerando=!0)},teclaSolta:function(o){o.keyCode==cc.KEY.a&&(this._acelerando=!1)},update:function(o){if(this._acelerando){var i=this._direcao.mul(this.velocidade*o);this.node.position=this.node.position.add(i)}}}),cc._RF.pop()},{Personagem:"Personagem"}],Personagem:[function(o,i,t){"use strict";cc._RF.push(i,"054dcmydeJP57D9ETAZi7TG","Personagem");var e=cc.Class({extends:cc.Component,properties:{tiroPrefab:cc.Prefab,_direcao:cc.Vec2},onLoad:function(){},calcularDirecao:function(o){var i=o.sub(this.node.position);return i=i.normalize()},olharPara:function(o){var i=Math.atan2(o.y,o.x);return i=-i*(180/Math.PI)},atirar:function(){var o=cc.instantiate(this.tiroPrefab);o.parent=this.node.parent,o.position=this.node.position,o.group=this.node.group,o.getComponent("Tiro").direcao=this._direcao},tomarDano:function(){},onCollisionEnter:function(o,i){},update:function(o){}});i.exports=e,cc._RF.pop()},{}],Tiro:[function(o,i,t){"use strict";cc._RF.push(i,"141bfnG/QBBiYpcfJo4hnpr","Tiro"),cc.Class({extends:cc.Component,properties:{direcao:cc.Vec2,velocidade:10},onLoad:function(){this.direcao=this.direcao.normalize()},onCollisionEnter:function(o,i){console.log("colidiu");var t=o.getComponent("Personagem");null!=t?t.tomarDano(2):o.node.destroy(),i.node.destroy()},update:function(o){var i=this.direcao.mul(this.velocidade*o);this.node.position=this.node.position.add(i)}}),cc._RF.pop()},{}]},{},["Gerador","Inimigo","Jogador","Personagem","Tiro"]);