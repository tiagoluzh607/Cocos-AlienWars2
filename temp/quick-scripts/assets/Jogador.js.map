{"version":3,"sources":["Jogador.js"],"names":["cc","Class","extends","Component","properties","_acelerando","_direcao","Vec2","tiroPrefab","Prefab","velocidade","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","teclaPressionada","KEY_UP","teclaSolta","canvas","find","mudarDirecao","atirar","director","getCollisionManager","enabled","event","tiro","instantiate","parent","node","position","componenteTiro","getComponent","direcao","posicaoMouse","getLocation","x","y","sub","normalize","keyCode","KEY","a","update","dt","deslocamento","mul","add"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAY,KADJ;AAERC,kBAAUN,GAAGO,IAFL;;AAIRC,oBAAYR,GAAGS,MAJP;AAKRC,oBAAY;AALJ,KAHP;;AAWL;AACAC,YAAQ,kBAAY;AAChBX,WAAGY,WAAH,CAAeC,EAAf,CAAkBb,GAAGc,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAqD,KAAKC,gBAA1D,EAA4E,IAA5E;AACAjB,WAAGY,WAAH,CAAeC,EAAf,CAAkBb,GAAGc,WAAH,CAAeC,SAAf,CAAyBG,MAA3C,EAAmD,KAAKC,UAAxD,EAAoE,IAApE;;AAEA,YAAIC,SAASpB,GAAGqB,IAAH,CAAQ,QAAR,CAAb;AACAD,eAAOP,EAAP,CAAU,WAAV,EAAuB,KAAKS,YAA5B,EAA0C,IAA1C;AACAF,eAAOP,EAAP,CAAU,WAAV,EAAuB,KAAKU,MAA5B,EAAoC,IAApC;;AAEAvB,WAAGwB,QAAH,CAAYC,mBAAZ,GAAkCC,OAAlC,GAA4C,IAA5C;AAEH,KAtBI;;AAwBLH,YAAQ,gBAASI,KAAT,EACR;AACI,YAAIC,OAAO5B,GAAG6B,WAAH,CAAe,KAAKrB,UAApB,CAAX;AACAoB,aAAKE,MAAL,GAAc,KAAKC,IAAL,CAAUD,MAAxB;AACAF,aAAKI,QAAL,GAAgB,KAAKD,IAAL,CAAUC,QAA1B;;AAEA,YAAIC,iBAAiBL,KAAKM,YAAL,CAAkB,MAAlB,CAArB;AACAD,uBAAeE,OAAf,GAAyB,KAAK7B,QAA9B;AACH,KAhCI;;AAkCLgB,kBAAc,sBAASK,KAAT,EACd;AACI,YAAIS,eAAeT,MAAMU,WAAN,EAAnB;AACAD,uBAAe,IAAIpC,GAAGO,IAAP,CAAY6B,aAAaE,CAAzB,EAA4BF,aAAaG,CAAzC,CAAf;;AAEA,YAAIJ,UAAUC,aAAaI,GAAb,CAAiB,KAAKT,IAAL,CAAUC,QAA3B,CAAd;AACAG,kBAAUA,QAAQM,SAAR,EAAV;AACA,aAAKnC,QAAL,GAAgB6B,OAAhB;AACH,KA1CI;;AA4CLlB,sBAAkB,0BAASU,KAAT,EAClB;AACI,YAAGA,MAAMe,OAAN,IAAiB1C,GAAG2C,GAAH,CAAOC,CAA3B,EACA;AACI,iBAAKvC,WAAL,GAAmB,IAAnB;AACH;AACJ,KAlDI;;AAoDLc,gBAAW,oBAASQ,KAAT,EACX;AACI,YAAGA,MAAMe,OAAN,IAAiB1C,GAAG2C,GAAH,CAAOC,CAA3B,EACA;AACI,iBAAKvC,WAAL,GAAmB,KAAnB;AACH;AAEJ,KA3DI;;AA6DL;AACAwC,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAG,KAAKzC,WAAR,EACI;AACI,gBAAI0C,eAAe,KAAKzC,QAAL,CAAc0C,GAAd,CAAkB,KAAKtC,UAAL,GAAkBoC,EAApC,CAAnB;AACA,iBAAKf,IAAL,CAAUC,QAAV,GAAsB,KAAKD,IAAL,CAAUC,QAAV,CAAmBiB,GAAnB,CAAuBF,YAAvB,CAAtB;AACH;AAIR;AAvEI,CAAT","file":"Jogador.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _acelerando:false,\r\n        _direcao: cc.Vec2,\r\n        \r\n        tiroPrefab: cc.Prefab,\r\n        velocidade: 10,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.teclaPressionada, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.teclaSolta, this);\r\n        \r\n        let canvas = cc.find(\"Canvas\");\r\n        canvas.on(\"mousemove\", this.mudarDirecao, this);\r\n        canvas.on(\"mousedown\", this.atirar, this);\r\n        \r\n        cc.director.getCollisionManager().enabled = true;\r\n        \r\n    },\r\n    \r\n    atirar: function(event)\r\n    {\r\n        let tiro = cc.instantiate(this.tiroPrefab);\r\n        tiro.parent = this.node.parent;\r\n        tiro.position = this.node.position;\r\n        \r\n        let componenteTiro = tiro.getComponent(\"Tiro\");\r\n        componenteTiro.direcao = this._direcao;\r\n    },\r\n    \r\n    mudarDirecao: function(event)\r\n    {\r\n        let posicaoMouse = event.getLocation();\r\n        posicaoMouse = new cc.Vec2(posicaoMouse.x, posicaoMouse.y);\r\n        \r\n        let direcao = posicaoMouse.sub(this.node.position);\r\n        direcao = direcao.normalize();\r\n        this._direcao = direcao;\r\n    },\r\n    \r\n    teclaPressionada: function(event)\r\n    { \r\n        if(event.keyCode == cc.KEY.a)\r\n        {\r\n            this._acelerando = true;\r\n        }\r\n    },\r\n\r\n    teclaSolta:function(event)\r\n    {\r\n        if(event.keyCode == cc.KEY.a)\r\n        {\r\n            this._acelerando = false;\r\n        }\r\n\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this._acelerando)\r\n            {\r\n                let deslocamento = this._direcao.mul(this.velocidade * dt)\r\n                this.node.position  = this.node.position.add(deslocamento);\r\n            }\r\n                \r\n            \r\n            \r\n    },\r\n});\r\n"]}