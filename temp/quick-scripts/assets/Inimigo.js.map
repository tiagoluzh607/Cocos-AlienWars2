{"version":3,"sources":["Inimigo.js"],"names":["Personagem","require","cc","Class","extends","properties","_alvo","Node","velocidade","tempoAtaque","onLoad","find","schedule","atirar","tomarDano","jogador","getComponent","adicionarPonto","node","destroy","disparo","instantiate","tiroPrefab","parent","position","group","componenteTiro","direcao","_direcao","mudarDirecao","sub","normalize","update","dt","deslocamento","mul","add"],"mappings":";;;;;;AACA,IAAIA,aAAaC,QAAQ,YAAR,CAAjB;AACAC,GAAGC,KAAH,CAAS;AACLC,UAASJ,UADJ;;AAGLK,aAAY;;AAGbC,SAAMJ,GAAGK,IAHI;AAIb;AACAC,cAAY,EALC;;AAOb;AACA;AACAC,eAAa;;AATA,EAHP;;AAgBRC,SAAQ,kBAAU;;AAEjB,OAAKJ,KAAL,GAAaJ,GAAGS,IAAH,CAAQ,MAAR,CAAb,CAFiB,CAEa;;AAE9B,OAAKC,QAAL,CAAc,KAAKC,MAAnB,EAA2B,KAAKJ,WAAhC;AAEA,EAtBO;;AAwBRK,YAAW,qBAAU;;AAEpB;AACA,MAAIC,UAAU,KAAKT,KAAL,CAAWU,YAAX,CAAwB,SAAxB,CAAd;AACAD,UAAQE,cAAR,CAAuB,EAAvB;;AAEA,OAAKC,IAAL,CAAUC,OAAV;AACA,EA/BO;;AAiCRN,SAAQ,kBAAU;AACjB,MAAIO,UAAUlB,GAAGmB,WAAH,CAAe,KAAKC,UAApB,CAAd;AACAF,UAAQG,MAAR,GAAiB,KAAKL,IAAL,CAAUK,MAA3B;AACAH,UAAQI,QAAR,GAAmB,KAAKN,IAAL,CAAUM,QAA7B;AACAJ,UAAQK,KAAR,GAAgB,KAAKP,IAAL,CAAUO,KAA1B,CAJiB,CAIgB;;AAEjC;AACA,MAAIC,iBAAiBN,QAAQJ,YAAR,CAAqB,MAArB,CAArB;AACAU,iBAAeC,OAAf,GAAyB,KAAKC,QAA9B;AACA,EA1CO;;AA4CRC,eAAc,wBAAU;AACvB,MAAIF,UAAU,KAAKrB,KAAL,CAAWkB,QAAX,CAAoBM,GAApB,CAAwB,KAAKZ,IAAL,CAAUM,QAAlC,CAAd;AACAG,YAAUA,QAAQI,SAAR,EAAV;AACA,OAAKH,QAAL,GAAgBD,OAAhB;AACA,EAhDO;;AAkDRK,SAAQ,gBAASC,EAAT,EAAY;AACnB,OAAKJ,YAAL;AACA,MAAIK,eAAe,KAAKN,QAAL,CAAcO,GAAd,CAAkB,KAAK3B,UAAL,GAAkByB,EAApC,CAAnB;AACA,OAAKf,IAAL,CAAUM,QAAV,GAAqB,KAAKN,IAAL,CAAUM,QAAV,CAAmBY,GAAnB,CAAuBF,YAAvB,CAArB;AACA;;AAtDO,CAAT","file":"Inimigo.js","sourceRoot":"..\\..\\..\\assets","sourcesContent":["\r\nlet Personagem = require(\"Personagem\");\r\ncc.Class({\r\n    extends: Personagem,\r\n\r\n    properties: {\r\n      \r\n\t  \r\n\t  _alvo:cc.Node,\r\n\t  //_direcao: cc.Vec2, vem com a herança de personagem\r\n\t  velocidade: 50,\r\n\t  \r\n\t  //tiro\r\n\t  //tiroPrefab: cc.Prefab, vem com a herança de personagem\r\n\t  tempoAtaque: 1,\r\n\t  \r\n    },\r\n\r\n\tonLoad: function(){\r\n\t\t\r\n\t\tthis._alvo = cc.find(\"hero\"); //buscando node do hero\r\n\t\t\r\n\t\tthis.schedule(this.atirar, this.tempoAtaque);\r\n\t\t\r\n\t},\r\n\t\r\n\ttomarDano: function(){\r\n\t\r\n\t\t//adiciona ponto ao jogador\r\n\t\tlet jogador = this._alvo.getComponent(\"Jogador\");\r\n\t\tjogador.adicionarPonto(10);\r\n\t\r\n\t\tthis.node.destroy();\r\n\t},\r\n\t\r\n\tatirar: function(){\r\n\t\tlet disparo = cc.instantiate(this.tiroPrefab);\r\n\t\tdisparo.parent = this.node.parent;\r\n\t\tdisparo.position = this.node.position;\r\n\t\tdisparo.group = this.node.group; //o grupo de colisão do tiro é o mesmo que o grupo de colisão do inimigo\r\n\t\t\r\n\t\t//direcao do disparo\r\n\t\tlet componenteTiro = disparo.getComponent(\"Tiro\");\r\n\t\tcomponenteTiro.direcao = this._direcao;\r\n\t},\r\n   \r\n\tmudarDirecao: function(){\r\n\t\tlet direcao = this._alvo.position.sub(this.node.position);\r\n\t\tdirecao = direcao.normalize();\r\n\t\tthis._direcao = direcao;\r\n\t},\r\n\t\r\n\tupdate: function(dt){\r\n\t\tthis.mudarDirecao();\r\n\t\tlet deslocamento = this._direcao.mul(this.velocidade * dt);\r\n\t\tthis.node.position = this.node.position.add(deslocamento);\r\n\t},\r\n   \r\n});\r\n"]}